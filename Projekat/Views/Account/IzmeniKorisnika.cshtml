<div id="sredina" class="sredina-upload-mat">

    <style>
        @@media screen and (max-width: 600px) {
           
        }

        <!-- Responsive design -->
    </style>
    @model Projekat.Models.IzmeniKorisnikaViewModel
    @{
        ViewBag.Title = "Izmeni Korisnika";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <h2>@ViewBag.Title</h2>


    <div style="margin-top: 75px;">
        
        @using (Html.BeginForm("IzmeniKorisnika", "Account", FormMethod.Post, new { @id = "noviKorisnik", @class = "form-horizontal smanji", role = "form", @enctype = "multipart/form-data" }))
        {


            @Html.AntiForgeryToken()
            <h4>Izmenite korisnika</h4>
            <img id="slikaZaIzmenu" src="data:image;base64,@System.Convert.ToBase64String(Model.Korisnik.Slika)" class="slika" />


            @*@Html.ValidationSummary()*@
            @Html.LabelFor(m => m.Korisnik.Ime, new { @class = "matDesignLabel" })
            @Html.TextBoxFor(m => m.Korisnik.Ime, new { @class = "korisnikTB" })



            @Html.LabelFor(m => m.Korisnik.Prezime, new { @class = "matDesignLabel" })
            @Html.TextBoxFor(m => m.Korisnik.Prezime, new { @class = "korisnikTB" })



            @Html.LabelFor(m => m.Korisnik.Email, new { @class = "matDesignLabel" })
            @Html.TextBoxFor(m => m.Korisnik.Email, new { @class = "korisnikTB" })


            @Html.LabelFor(m => m.Korisnik.PhoneNumber, new { @class = "matDesignLabel" })
            @Html.TextBoxFor(m => m.Korisnik.PhoneNumber, new { @class = "korisnikTB" })
            @*Html.ValidationMessageFor(m => m.phoneNumber, "", new { @class = "text-danger" })*@
            <div id="godina">
                @Html.LabelFor(m => m.Korisnik.GodinaUpisa, new { @class = "matDesignLabel" })
                @Html.TextBoxFor(m => m.Korisnik.GodinaUpisa, new { @class = "korisnikTB" })
            </div>
            @Html.HiddenFor(m => m.Korisnik.UserName)
            @Html.HiddenFor(m => m.Korisnik.Slika)


            <div class="noviKorisnikDD">

                <label for="customDropdown" class="cdlLabele"> Odaberite smer: </label>
                @Html.DropDownListFor(m => m.Korisnik.SmerId, new SelectList(Model.Smerovi, "smerId", "smerNaziv"), new { @class = "customDropdown" })
            </div>
            <div class="noviKorisnikDD" name="SelektUloga">

                <label for="customDropdown" class="cdlLabele"> Odaberite ulogu: </label>
                @Html.DropDownListFor(m => m.Korisnik.Uloga, new SelectList(Model.Uloge, "Name", "Name"), new { @class = "customDropdown", @selected = "selected" })
            </div>
            <div class="noviKorisnikDD">
                @if (User.IsInRole("SuperAdministrator"))
                {
                    <label for="customDropdown" class="cdlLabele"> Odaberite skolu: </label>
                    @Html.DropDownListFor(m => m.Korisnik.SkolaId, new SelectList(Model.Skole, "IdSkole", "NazivSkole"), new { @class = "customDropdown", @selected = "selected" })
                }
                else
                {
                    <p>Korisniku ce automatski biti dodeljena skola:<br /> @Model.Skole.First().NazivSkole</p>
                }

            </div>

            <input type="file" name="Fajl" id="file" class="inputfile" onchange="document.getElementById('slikaZaIzmenu').src = window.URL.createObjectURL(this.files[0])" />
            <label for="file" id="izaberi-materijal"> <span id="filename"> <span> <img src="~/Content/img/upload2.png" alt="Izaberite Sliku"> Izaberite sliku...</span></span> </label>

            <div class="izmene">
                <input type="submit" class="btnsOnIzmeni" value="SAČUVAJ IZMENE" onclick="return confirm('Molimo vas potvrdite izmenu korisnika')" />
                <input type="button" id="dugmeBack" class="btnsOnIzmeni" value="ODUSTANI" onclick="return confirm('Da li želite da odustanete od izmena?')" />
            </div>

        }
    </div>

</div>

@section Scripts {
    <script>

        $("#dugmeBack").click(function () {
            history.back();
        });
    </script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>

    @Scripts.Render("~/bundles/izmeni_korisnika")
    @Scripts.Render("~/bundles/Content/css")
}   